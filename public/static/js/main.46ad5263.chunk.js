(this.webpackJsonpreact2=this.webpackJsonpreact2||[]).push([[0],{178:function(e,t,n){},196:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},278:function(e,t,n){"use strict";n.r(t);var c=n(27),a=n.n(c),s=n(163),r=n(25),o=n(17),l=(n(178),n(0)),i=n.n(l),u=n(30),d=n.n(u),j=n(168),b=n(73),h=n(281),O=(n(196),n(28)),f=n(6),m=function(e){var t=e.logout,n=e.user,c=e.login,a=e.authenticated,s=e.authenticationButtonLoading;return Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)("div",{children:Object(f.jsx)("p",{children:"GLAM URL Shortener"})}),Object(f.jsx)("div",{className:a?"":"fix-view-div",children:a?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("p",{children:["Welcome ",Object(f.jsx)("span",{className:"header-user-tab",children:n})]}),Object(f.jsx)(O.a,{className:"logout-button",onClick:t,loading:s,children:"Sign out"})]}):Object(f.jsx)(O.a,{className:"login-button fix-view-button",onClick:c,loading:s,children:"Sign in with AD"})})]})},g=n(132),p=n.n(g),x=n(157),v=(n(199),n(200),function(e){var t=e.passwordProtect,n=e.setPasswordProtect,c=e.password,a=e.setPassword,s=e.alias,r=e.setAlias,l=e.loading,u=e.aliasAllowed,j=e.setAliasAllowed,b=e.passwordError,h=e.aliasError,O=e.passwordTouched,m=e.setPasswordTouched,g=e.setError,p=i.a.useState(s),x=Object(o.a)(p,2),v=x[0],w=x[1],S=i.a.useState("Available"),k=Object(o.a)(S,2),y=k[0],C=k[1];return i.a.useEffect((function(){v.length>0?(j(!1),C("Checking")):j(!0);var e=setTimeout((function(){v.length>0?d.a.get("/api/url/short/".concat(v,"/exists")).then((function(e){e.data.exists?(j(!1),C("Not available")):(j(!0),r(v),C("Available"))})).catch((function(e){g("Something went wrong"),r(""),w(""),j(!0),console.log(e)})):(r(""),j(!0))}),1e3);return function(){clearTimeout(e)}}),[v,r,j,g]),Object(f.jsxs)("div",{className:"link-options",children:[Object(f.jsx)("p",{children:"Customize link"}),Object(f.jsxs)("div",{className:"password-protect",children:[Object(f.jsxs)("label",{className:"container",children:[Object(f.jsx)("div",{className:t?"not-selected":"selected",children:"Public"}),Object(f.jsx)("input",{disabled:l,type:"radio",checked:!t,onChange:function(){a(""),m(!1),n(!1)},name:"radio"}),Object(f.jsx)("span",{className:"checkmark"})]}),Object(f.jsxs)("label",{className:"container",children:[Object(f.jsx)("div",{className:t?"selected":"not-selected",children:"Secret"}),Object(f.jsx)("input",{disabled:l,type:"radio",checked:t,onChange:function(){return n(!0)},name:"radio"}),Object(f.jsx)("span",{className:"checkmark"})]})]}),t?Object(f.jsx)("input",{className:"app-input ".concat(b?"error":""),style:{marginTop:"0px"},placeholder:"******** (required if secret is selected)",value:c,onClick:function(){return m(!0)},onChange:function(e){O||m(!0),a(e.target.value)}}):null,Object(f.jsxs)("div",{className:"alias",children:[Object(f.jsx)("label",{children:window.location.href}),Object(f.jsx)("input",{className:"app-input ".concat(h?"error":""),placeholder:"custom alias (optional)",value:v,onChange:function(e){return w(e.target.value)}}),v.length>0?Object(f.jsx)("span",{className:u?"available":"notavailable",children:y}):null]})]})}),w=function(e){var t=e.accessToken,n=e.username,c=e.authenticated,a=e.setError,s=e.mobileMode,r=e.shortURL,i=e.setShortURL,u=Object(l.useState)(!0),j=Object(o.a)(u,2),b=j[0],h=j[1],m=Object(l.useState)(!1),g=Object(o.a)(m,2),w=g[0],S=g[1],k=Object(l.useState)(!1),y=Object(o.a)(k,2),C=y[0],L=y[1],T=Object(l.useState)(""),E=Object(o.a)(T,2),N=E[0],A=E[1],U=Object(l.useState)(!1),I=Object(o.a)(U,2),D=I[0],R=I[1],P=Object(l.useState)(!1),M=Object(o.a)(P,2),_=M[0],B=M[1],z=Object(l.useState)(""),G=Object(o.a)(z,2),F=G[0],V=G[1],W=Object(l.useState)(""),H=Object(o.a)(W,2),J=H[0],K=H[1],Y=Object(l.useState)(!0),q=Object(o.a)(Y,2),Q=q[0],X=q[1],Z=Object(l.useState)(!1),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ne=Object(l.useState)(!1),ce=Object(o.a)(ne,2),ae=ce[0],se=ce[1],re=Object(l.useState)(!1),oe=Object(o.a)(re,2),le=oe[0],ie=oe[1],ue=Object(l.useState)(!1),de=Object(o.a)(ue,2),je=de[0],be=de[1],he=Object(l.useState)(!1),Oe=Object(o.a)(he,2),fe=Oe[0],me=Oe[1],ge=Object(l.useState)("Copy"),pe=Object(o.a)(ge,2),xe=pe[0],ve=pe[1],we=function(){var e=Object(x.a)(p.a.mark((function e(s){var r,o,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),c){e.next=4;break}return a("Please login to shorten URL"),e.abrupt("return");case 4:if(!b){e.next=7;break}return Se(),e.abrupt("return");case 7:return L(!0),S(!0),h(!0),e.prev=10,e.next=13,d()({method:"POST",url:"/api/url/shortUrls",data:{full:N,password:F.length>0?F:void 0,short:J.length>0?J:void 0,accessToken:t,username:n}});case 13:201===(r=e.sent).status||200===r.status?(o=r.data.shortUrl.short,ve("Copy"),i(window.location.href+o),A(""),R(!1),B(!1),V(""),K(""),X(!0),te(!1),se(!1),ie(!1),be(!1),me(!1)):("shortURL already exists"===(l=r.data.error)?(a("Alias is already in use"),K("")):a(l),h(!1)),L(!1),S(!1),e.next=26;break;case 19:e.prev=19,e.t0=e.catch(10),a("Something went wrong"),h(!1),L(!1),S(!1),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(){0===N.length&&ie(!0),D&&(_&&0===F.length&&be(!0),J.length>0&&(Q||me(!0)))};return Object(l.useEffect)((function(){N.length>0&&/(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,63}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?/.test(N)?(ie(!1),D?_?F.length>0&&Q?(be(!1),me(!1),h(!1)):(0===F.length&&ae&&be(!0),Q||me(!0),h(!0)):Q?(be(!1),me(!1),h(!1)):(me(!0),h(!0)):(be(!1),me(!1),h(!1))):(ee&&ie(!0),h(!0))}),[N,D,_,F,Q,ae,ee]),Object(l.useEffect)((function(){c||(ve("Copy"),i(null),A(""),R(!1),B(!1),V(""),K(""),X(!0),te(!1),se(!1),ie(!1),be(!1),me(!1))}),[c,i]),Object(l.useEffect)((function(){var e;return r&&r.length>0&&(e=setTimeout((function(){i(null)}),1e4)),function(){clearTimeout(e)}}),[r,i]),Object(f.jsxs)("div",{className:"main",children:[Object(f.jsx)("p",{children:"GLAM URL Shortener"}),r?Object(f.jsxs)("div",{className:"short-url",children:[Object(f.jsx)("span",{style:{marginRight:"0.5rem"},children:"Short URL is "}),Object(f.jsx)("a",{style:{wordBreak:"break-all"},target:"_blank",rel:"noreferrer",href:r,children:s?r.slice(0,30)+"...":r}),Object(f.jsx)("span",{className:"copy-button",onClick:function(){var e=document.createElement("input");document.body.appendChild(e),e.value=r,e.select(),document.execCommand("copy",!1),e.remove(),ve("Copied")},children:xe})]}):null,Object(f.jsx)("div",{className:"loader",style:{display:C?"block":"none"},children:Object(f.jsx)("div",{className:"loading"})}),Object(f.jsxs)("form",{onSubmit:we,children:[Object(f.jsx)("input",{className:"url-input ".concat(le?"error":""),placeholder:"http(s)://",value:N,onClick:function(){return te(!0)},onChange:function(e){ee||te(!0),A(e.target.value)}}),D?Object(f.jsx)(v,{passwordProtect:_,setPasswordProtect:B,password:F,setPassword:V,alias:J,setAlias:K,loading:C,aliasAllowed:Q,setAliasAllowed:X,passwordError:je,aliasError:fe,passwordTouched:ae,setPasswordTouched:se,setError:a}):null,Object(f.jsxs)("div",{className:"form-buttons",children:[Object(f.jsx)(O.a,{type:"submit",className:b?"disabled":"",onClick:we,children:"Shorten"}),Object(f.jsx)("button",{type:"button",onClick:function(){w||R((function(e){return!e}))},className:w?"disabled":"",children:"Link Options"})]})]}),Object(f.jsx)("p",{style:{color:"#98978b",marginTop:"1rem",textAlign:"center"},children:'Did you know you can change the URL ending by clicking on "Link Options"?'})]})},S=n(92),k=n(136),y=(n(201),n(89)),C=n(286),L=n(284),T=n(81),E=n(113),N=n(282),A=(n(202),n(283)),U=n(285),I=A.a.RangePicker,D=function(e){var t=e.isModalVisible,n=e.setIsModalVisible,c=e.modalInfo,a=e.modalDate,s=e.setModalDate,r=e.setError;return i.a.useEffect((function(){c&&d.a.get("api/url/short/clickDates/".concat(c.short)).then((function(e){console.log(e);var t={};e.shortUrl.clicksDates.forEach((function(e){var n=("00"+((e=new Date(e)).getMonth()+1)).slice(-2)+"/"+("00"+e.getDate()).slice(-2)+"/"+e.getFullYear();t[n]?t[n]=t[n]+1:t[n]=1})),console.log("ahga"),console.log(t)})).catch((function(e){r("Something went wrong :("),console.log(e)}))}),[c,r]),Object(f.jsxs)(U.a,{title:"Basic Modal",visible:t,footer:null,closeIcon:Object(f.jsx)("h2",{onClick:function(){return n(!1)},children:"\u2716"}),children:[Object(f.jsxs)("div",{className:"modal-top-half",children:[Object(f.jsxs)("div",{className:"links",children:[Object(f.jsxs)("p",{children:["Short Link :"," ",Object(f.jsx)("a",{target:"_blank",rel:"noreferrer",href:window.location.href+(null===c||void 0===c?void 0:c.short),children:null===c||void 0===c?void 0:c.short})]}),Object(f.jsxs)("p",{children:["Long Link :"," ",Object(f.jsx)("a",{target:"_blank",rel:"noreferrer",href:null===c||void 0===c?void 0:c.full,children:(null===c||void 0===c?void 0:c.full.slice(0,50))+"..."})]})]}),Object(f.jsx)(I,{onChange:function(e){return s(e)},disabledDate:function(e){return e>Date.now()},value:a})]}),Object(f.jsx)("p",{children:"Some contents..."}),Object(f.jsx)("p",{children:"Some contents..."}),Object(f.jsx)("p",{children:"Some contents..."}),Object(f.jsx)("p",{children:"Some contents..."})]})},R=y.a.Option,P=function(e){j.b.success(e)},M=function(e){var t=e.username,n=e.accessToken,c=e.setError,a=Object(l.useState)([{short:"asdasdasdasd",full:"asdasdasdasda",clicks:10},{short:"boli",full:"asdasdasdasda",clicks:10}]),s=Object(o.a)(a,2),r=s[0],i=s[1],u=Object(l.useState)(0),j=Object(o.a)(u,2),b=j[0],h=j[1],m=Object(l.useState)([]),g=Object(o.a)(m,2),p=g[0],x=g[1],v=Object(l.useState)(!1),w=Object(o.a)(v,2),A=w[0],U=w[1],I=Object(l.useState)(!1),M=Object(o.a)(I,2),_=M[0],B=M[1],z=Object(l.useState)(!1),G=Object(o.a)(z,2),F=G[0],V=G[1],W=Object(l.useState)(!1),H=Object(o.a)(W,2),J=H[0],K=H[1],Y=Object(l.useState)(!1),q=Object(o.a)(Y,2),Q=q[0],X=q[1],Z=Object(l.useState)(!1),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ne=Object(l.useState)(!1),ce=Object(o.a)(ne,2),ae=ce[0],se=ce[1],re=Object(l.useState)(""),oe=Object(o.a)(re,2),le=oe[0],ie=oe[1],ue=Object(l.useState)(""),de=Object(o.a)(ue,2),je=de[0],be=de[1],he=Object(l.useState)(1),Oe=Object(o.a)(he,2),fe=Oe[0],me=Oe[1],ge=Object(l.useState)("latest"),pe=Object(o.a)(ge,2),xe=pe[0],ve=pe[1],we=Object(l.useState)(3),Se=Object(o.a)(we,2),ke=Se[0],ye=Se[1],Ce=Object(l.useState)(!1),Le=Object(o.a)(Ce,2),Te=Le[0],Ee=Le[1],Ne=Object(l.useState)(null),Ae=Object(o.a)(Ne,2),Ue=Ae[0],Ie=Ae[1],De=Object(l.useState)([]),Re=Object(o.a)(De,2),Pe=Re[0],Me=Re[1],_e=[{title:"Created at",dataIndex:"createdAt",render:function(e){var t=new Date(e);return("00"+(t.getMonth()+1)).slice(-2)+"/"+("00"+t.getDate()).slice(-2)+"/"+t.getFullYear()+" "+("00"+t.getHours()).slice(-2)+":"+("00"+t.getMinutes()).slice(-2)+":"+("00"+t.getSeconds()).slice(-2)}},{title:"Short URL",dataIndex:"short",render:function(e,t){var n=t.idx;return Object(f.jsx)("a",{target:"_blank",rel:"noreferrer",onClick:function(){var e=Object(k.a)(r);e[n]=Object(S.a)(Object(S.a)({},e[n]),{},{clicks:e[n].clicks+1}),i(e)},href:window.location.href+e,children:e})}},{title:"Long URL",dataIndex:"full",render:function(e){return Object(f.jsx)("a",{target:"_blank",rel:"noreferrer",href:e,children:e.slice(0,50)+"..."})}},{title:"Clicks",dataIndex:"clicks",render:function(e,t){var n=t.short,c=t.full;return Object(f.jsxs)("p",{style:{cursor:"pointer"},onClick:function(){Ie({short:n,full:c}),Me([]),Ee(!0)},children:[e," \ud83d\udcc8"]})}},{title:"Protected",dataIndex:"password",render:function(e){return e?Object(f.jsx)("p",{children:"\ud83d\udd12"}):Object(f.jsx)("h3",{children:"-"})}},{title:"Status",dataIndex:"status",render:function(e){return e?Object(f.jsx)("p",{children:"Enabled"}):Object(f.jsx)("p",{children:"Disabled"})}}];Object(l.useEffect)((function(){d.a.post("/api/url",{accessToken:n,username:t,pageNumber:fe,search:le,sort:xe,filter:ke}).then((function(e){var n=[];e.data.shortUrls.forEach((function(e,t){var c=e.short,a=e.full,s=e.clicks,r=e._id,o=e.password,l=e.createdAt,i=e.status;n.push({short:c,full:a,clicks:s,key:r,password:!!o,createdAt:l,status:i,idx:t})})),i(n),d.a.get("/api/url/shortUrls/count/".concat(t)).then((function(e){var t=e.data.count;return h(t)})).catch((function(e){console.log(e),c("Something went wrong")}))})).catch((function(e){console.log(e),c("Something went wrong")}))}),[t,n,c,fe,le,ke,xe]),Object(l.useEffect)((function(){var e=setTimeout((function(){ie(je),me(1)}),1e3);return function(){return clearTimeout(e)}}),[je]);var Be=function(e){X(!0),e?(te(!0),K(!0)):(se(!0),V(!0));var a=[];p.forEach((function(t){r.find((function(e){return e.key===t})).status!==e&&a.push(t)})),d.a.patch("/api/url/shortUrls",{accessToken:n,username:t,ids:a,status:e}).then((function(){P(e?"Enabled":"Disabled"),V(!1),X(!1),x([]),e?(te(!1),K(!1)):(se(!1),V(!1));var t=Object(k.a)(r);t=t.map((function(t){return a.some((function(e){return t.key===e}))?Object(S.a)(Object(S.a)({},t),{},{status:e}):t})),i(t)})).catch((function(t){x([]),V(!1),X(!1),e?(te(!1),K(!1)):(se(!1),V(!1)),console.log(t),c("Something went wrong")}))},ze={selectedRows:p,onChange:function(e){return x(e)}},Ge=p.length>0;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(D,{isModalVisible:Te,setIsModalVisible:Ee,modalInfo:Ue,modalDate:Pe,setModalDate:Me,setError:c}),Object(f.jsxs)("div",{className:"list-container",children:[Object(f.jsx)("p",{children:"Table of links generated"}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{style:{marginBottom:"1rem"},children:[Object(f.jsx)(C.a,{title:"Are you sure to delete selected URLs?",onCancel:function(){U(!0),te(!0),se(!0);var e=[];p.forEach((function(t){e.push(t)})),d.a.delete("/api/url/shortUrls",{data:{accessToken:n,username:t,ids:e}}).then((function(){P("Deleted"),U(!1),te(!1),se(!1),me(1),x([])})).catch((function(e){x([]),U(!1),te(!1),se(!1),console.log(e),c("Something went wrong")}))},okText:"Cancel",cancelText:"Delete",children:Object(f.jsx)(O.a,{style:{marginRight:"0.5rem"},type:"danger",disabled:!Ge||Q,loading:A,children:"Delete"})}),"  ",Object(f.jsx)(C.a,{title:"Are you sure to disable selected URLs?",onCancel:function(){return Be(!1)},okText:"Cancel",cancelText:"Disable",children:Object(f.jsx)(O.a,{style:{marginLeft:"0.5rem",marginRight:"0.5rem"},type:"danger",disabled:!Ge||ee,loading:F,children:"Disable"})}),"  ",Object(f.jsx)(C.a,{title:"Are you sure to enable selected URLs?",onCancel:function(){return Be(!0)},okText:"Cancel",cancelText:"Enable",children:Object(f.jsx)(O.a,{style:{marginLeft:"0.5rem"},type:"primary",disabled:!Ge||ae,loading:J,children:"Enable"})}),Object(f.jsx)("span",{style:{marginLeft:8,position:"relative",top:"5px"},children:Ge?"Selected ".concat(p.length," items"):""})]}),Object(f.jsx)("div",{children:Object(f.jsx)(L.a,{placeholder:"Search....",value:je,onChange:function(e){return be(e.target.value)}})}),Object(f.jsxs)("div",{children:[Object(f.jsx)(T.a,{title:"Sort by",children:Object(f.jsxs)(y.a,{value:xe,onChange:function(e){me(1),ve(e)},children:[Object(f.jsx)(R,{value:"latest",children:"Latest"}),Object(f.jsx)(R,{value:"oldest",children:"Oldest"}),Object(f.jsx)(R,{value:"mostclicked",children:"Most clicked"}),Object(f.jsx)(R,{value:"leastclicked",children:"Least clicked"})]})}),Object(f.jsx)(T.a,{title:"Link enabled/disabled filter",children:Object(f.jsxs)(E.a.Group,{onChange:function(e){me(1),ye(e.target.value)},value:ke,children:[Object(f.jsx)(E.a,{value:1,children:"Enabled"}),Object(f.jsx)(E.a,{value:2,children:"Disabled"}),Object(f.jsx)(E.a,{value:3,children:"Both"})]})})]})]}),Object(f.jsx)(N.a,{rowSelection:ze,columns:_e,dataSource:r,scroll:{x:1e3},pagination:{current:fe,total:b,showSizeChanger:!1,onChange:function(e){return me(e)}}}),b>0?Object(f.jsx)(C.a,{title:"Are you sure to delete all URLs generated by you?",onCancel:function(){B(!0),d.a.delete("/api/url/shortUrls/all",{data:{accessToken:n,username:t}}).then((function(){i([]),h(0),U(!1),me(1)})).catch((function(e){B(!1),console.log(e),c("Something went wrong")}))},okText:"Cancel",cancelText:"Delete",children:Object(f.jsxs)(O.a,{style:{margin:"1rem 0"},type:"danger",loading:_,children:["Delete all ",b," links generated by you"]})}):null]})]})},_={appId:"d4da2439-fc78-49c7-a5d8-b3288224a42d",redirectUri:"http://localhost:3000",scopes:["user.read"],authority:"https://login.microsoftonline.com/".concat("7c87cabd-9999-4fe8-84b5-a3092b16040e")},B=function(){var e=null,t=Object(l.useState)("home"),n=Object(o.a)(t,2),c=n[0],a=n[1],s=Object(l.useState)(!1),r=Object(o.a)(s,2),i=r[0],u=r[1],O=Object(l.useState)(!1),g=Object(o.a)(O,2),p=g[0],x=g[1],v=Object(l.useState)(null),S=Object(o.a)(v,2),k=S[0],y=S[1],C=Object(l.useState)(null),L=Object(o.a)(C,2),T=L[0],E=L[1],N=Object(l.useState)(null),A=Object(o.a)(N,2),U=A[0],I=A[1],D=Object(l.useState)(!1),R=Object(o.a)(D,2),P=R[0],B=R[1],z=Object(l.useState)(null),G=Object(o.a)(z,2),F=G[0],V=G[1],W=Object(l.useState)(null),H=Object(o.a)(W,2),J=H[0],K=H[1];Object(l.useEffect)((function(){window.innerWidth<768?x(!0):x(!1);var e=window.addEventListener("resize",(function(){window.innerWidth<768?x(!0):x(!1)})),t=sessionStorage.getItem("accesstoken"),n=sessionStorage.getItem("username"),c=sessionStorage.getItem("name");return t&&n&&c&&(B(!0),d.a.post("/api/authenticate",{accessToken:t,username:n}).then((function(e){B(!1),200===e.status?(u(!0),y(c),E(t),I(n)):(B(!1),V("Something went wrong! :("))})).catch((function(e){B(!1),console.log(e),V("Something went wrong! :(")}))),function(){window.removeEventListener("resize",e)}}),[]),Object(l.useEffect)((function(){var e;F&&(e=F,j.b.error(e),V(null))}),[F]);var Y=new h.a({auth:{clientId:_.appId,redirectUri:_.redirectUri,authority:_.authority}}),q=function(){B(!0);try{Y.logoutPopup().then((function(){clearTimeout(e),B(!1),y(null),u(!1),E(null),I(null),sessionStorage.removeItem("name"),sessionStorage.removeItem("accesstoken"),sessionStorage.removeItem("username")}))}catch(t){console.log(t),V("Something went wrong! :(")}};return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{children:[Object(f.jsx)(m,{user:k,authenticated:i,login:function(){B(!0);try{Y.loginPopup({scopes:_.scopes,prompt:"select_account"}).then((function(t){e=setTimeout(q,3599998),B(!1),y(t.account.name),E(t.accessToken),sessionStorage.setItem("name",t.account.name),sessionStorage.setItem("username",t.account.username),sessionStorage.setItem("accesstoken",t.accessToken),I(t.account.username),u(!0)}))}catch(t){console.log(t),V("Something went wrong! :(")}},logout:q,authenticationButtonLoading:P,setAuthenticationButtonLoading:B}),Object(f.jsx)("div",{className:"menu-container",children:Object(f.jsxs)(b.a,{onClick:function(e){return a(e.key)},selectedKeys:[c],mode:"horizontal",style:{justifyContent:"center"},children:[Object(f.jsx)(b.a.Item,{children:"Home"},"home"),Object(f.jsx)(b.a.Item,{children:"About"},"about"),i?Object(f.jsx)(b.a.Item,{children:"Links"},"links"):null]})}),"home"===c?Object(f.jsx)(w,{authenticated:i,accessToken:T,username:U,setError:V,mobileMode:p,shortURL:J,setShortURL:K}):"about"===c?Object(f.jsxs)("div",{className:"app-about",children:["GLAM URL shortener is a minimalistic link shortening platform built specifically for Oxford GLAM by",Object(f.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"https://www.cloudmantra.net",children:[" cloudmantra.net",Object(f.jsx)("sup",{children:"TM"})]})]}):"links"===c&&i?Object(f.jsx)(M,{accessToken:T,username:U,setError:V}):null]})})},z=function(){var e=Object(l.useState)("Redirecting..."),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(l.useState)(!1),s=Object(o.a)(a,2),r=s[0],i=s[1],u=Object(l.useState)(""),j=Object(o.a)(u,2),b=j[0],h=j[1];Object(l.useEffect)((function(){d.a.get("/api/url/short/".concat(window.location.pathname.slice(1),"?referrer=").concat(document.referrer)).then((function(e){var t=e.data.shortUrl;"string"===typeof t&&"password protected"===t?i(!0):"string"===typeof t&&"disabled"===t?c("Link Disabled"):window.location.href=t.full})).catch((function(e){console.log(e),c("Something went wrong")}))}),[]);var O=function(e){var t=function(){d()({method:"POST",url:"/api/url/short/".concat(window.location.pathname.slice(1),"?referrer=").concat(document.referrer),data:{password:b}}).then((function(e){var t=e.data.shortUrl;window.location.href=t.full})).catch((function(e){console.log(e),c("Not found or Password incorrect")}))};"Enter"===e.key?t():e.key||t()};return Object(f.jsxs)("div",{style:{width:"100vw",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(f.jsx)("p",{style:{fontSize:"5vw",marginBottom:"2rem",color:"white",width:"90vw",height:"100px",backgroundColor:"rgb(62, 63, 58)",display:"flex",justifyContent:"center",alignItems:"center"},children:"GLAM URL Shortener"}),Object(f.jsx)("h1",{style:{marginBottom:"2rem",color:"rgb(62, 63, 58)"},children:n}),r?Object(f.jsxs)("div",{style:{display:"flex"},children:[Object(f.jsx)("input",{style:{padding:"1rem 2rem",textAlign:"center",fontSize:"1rem"},placeholder:"Enter Password",value:b,onChange:function(e){var t=e.target.value;return h(t)},onKeyPress:O}),Object(f.jsx)("span",{style:{marginLeft:"1rem",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:O,children:"Go"})]}):null]})};a.a.render(Object(f.jsx)(s.a,{children:Object(f.jsxs)(r.c,{children:[Object(f.jsx)(r.a,{exact:!0,path:"/",component:B}),Object(f.jsx)(r.a,{path:"/:shortUrl",component:z})]})}),document.getElementById("root"))}},[[278,1,2]]]);
//# sourceMappingURL=main.46ad5263.chunk.js.map